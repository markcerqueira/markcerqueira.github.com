<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Nuking Permission Errors on El Capitan &middot; mark cerqueira
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="/public/css/tags.css">
  <link rel="stylesheet" href="/public/css/v1.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source%20Sans%20Pro">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-0d">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p></p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">home</a>
    <a class="sidebar-nav-item" href="/about/">about</a>     
    <a class="sidebar-nav-item" href="/archive/">archive</a>
    <a class="sidebar-nav-item" href="/fitness/">fitness</a>
    <a class="sidebar-nav-item" href="/projects/">projects</a>
  </nav>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">mark cerqueira</a>
            <small>well-rounded nerd</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">Nuking Permission Errors on El Capitan</h1>
  <span class="post-date">08 Jun 2016</span>
  <p>I have a home server running El Capitan (10.11.5). The other day when a cron job failed to send out some emails, I took a look and was <strong>horrified</strong> to find my Desktop folder (yes, I have my source code folder on the Desktop) had its <strong>permissions totally borked</strong>.</p>

<p>I tried the usual solutions: ran Software Update, restarted (twice), chmod-ed everything, tried modifying permissions from the Get Info pop-up, ran Disk Utility’s First Aid, <a href="http://osxdaily.com/2015/11/04/verify-repair-permissions-mac-os-x/">repaired disk permissions</a> from the command line (El Capitan removed this from Disk Utility for some reason), and <a href="http://kb.parallels.com/en/120432">reset home folder permissions and ACLs</a> (access control lists not anterior cruciate ligament). <strong>None of this did the trick.</strong></p>

<p>In desperation <strong>I took to the internet to find random things to paste into the command line</strong>, preferably with <strong>sudo</strong> in it! I saw <a href="https://discussions.apple.com/thread/5182705?start=0&amp;tstart=0">a post on Apple’s help forums</a> by Linc Davis; I’ve seen him post plenty of helpful things in the past and he is Level 10 with 204,169 points which is a lot of credibility points in my book. His solution was to paste this bad boy (which unlocks all your user files and resets their ownership and ACLs to defaults) into the command line:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">{</span> sudo chflags -R nouchg,nouappnd ~ <span class="nv">$TMPDIR</span>.. ; sudo chown -R <span class="nv">$UID</span>:staff ~ <span class="nv">$_</span> ; sudo chmod -R u+rwX ~ <span class="nv">$_</span> ; chmod -R -N ~ <span class="nv">$_</span> ; <span class="o">}</span> 2&gt; /dev/null</code></pre></figure>

<p><strong>And it worked!</strong> Thanks, Linc!</p>

<p>I’ll keep this bad boy around for the inevitable future permissions mishaps. And I also discovered a new requirement for anything I paste into the command line: piping the output of standard error to /dev/null blackhole (i.e. 2&gt; /dev/null)!</p>


</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2016/08/04/changing-progress-bar-color/">
            Changing Progress Bar Spinner Color
            <small>04 Aug 2016</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2016/07/30/ruby-datetime-nsdate/">
            Ruby DateTime to Objective-C NSDate
            <small>30 Jul 2016</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2016/07/28/concert-review-final-symphony/">
            Concert Review: Final Symphony, San Francisco, 7/28/16
            <small>28 Jul 2016</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
